<script setup lang="ts">
const links = [
  {label:'Главная',url:'/'},
  {label:'О нас',url:'/about'},
  {label:'Оплата и доставка',url:'/delivery'},
  {label:'Услуги',url:'/services'},
  // {label:'Статьи',url:'/'},
  {label:'Контакты',url:'/contacts'},
]

const route = useRoute()
const q = ref(null)
const visible= ref(false)
const is_index = computed(()=>route.fullPath === '/')

const keyDown = async (key) => {
  if (!q.value) return
  if (key.keyCode === 13) {
    await navigateTo(`/search?q=${q.value}`, { replace: true });
  }
}
watch(() => route.fullPath, () => {
  console.log('route change')
  visible.value = false
});

</script>

<template>
  <div class="container">
    <header  class=" pt-6">
      <div class="flex items-center justify-between gap-4 py-3 md:py-0">
        <nuxt-link to="/">
          <svg width="202" height="58" viewBox="0 0 202 58" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_38_76)">
              <rect x="22.1421" y="70.2494" width="39.5542" height="7.91085" transform="rotate(-45 22.1421 70.2494)" fill="#2C1F22"/>
              <rect x="70.2502" y="33.3304" width="39.5542" height="7.91085" transform="rotate(-135 70.2502 33.3304)" fill="#2C1F22"/>
              <rect x="33.3313" y="-14.7761" width="39.5542" height="7.91085" transform="rotate(135 33.3313 -14.7761)" fill="#2C1F22"/>
              <rect x="21.0273" y="42.2789" width="39.5542" height="7.91085" transform="rotate(-135 21.0273 42.2789)" fill="#2C1F22"/>
              <rect x="15.4326" y="63.5374" width="39.5542" height="7.91085" transform="rotate(-45 15.4326 63.5374)" fill="#2C1F22"/>
              <rect x="63.541" y="40.0433" width="39.5542" height="7.91085" transform="rotate(-135 63.541 40.0433)" fill="#2C1F22"/>
              <rect x="40.0442" y="-8.06406" width="39.5542" height="7.91085" transform="rotate(135 40.0442 -8.06406)" fill="#2C1F22"/>
              <rect x="14.311" y="48.9918" width="39.5542" height="7.91085" transform="rotate(-135 14.311 48.9918)" fill="#2C1F22"/>
              <rect x="8.71973" y="56.8237" width="39.5542" height="7.91085" transform="rotate(-45 8.71973 56.8237)" fill="#2C1F22"/>
              <rect x="56.8247" y="46.7553" width="39.5542" height="7.91085" transform="rotate(-135 56.8247 46.7553)" fill="#2C1F22"/>
              <rect x="46.7571" y="-1.35121" width="39.5542" height="7.91085" transform="rotate(135 46.7571 -1.35121)" fill="#2C1F22"/>
              <rect x="7.59814" y="55.7055" width="39.5542" height="7.91085" transform="rotate(-135 7.59814 55.7055)" fill="#2C1F22"/>
            </g>
            <path d="M90.954 23.7119H85.8636L84.0234 20.3183H73.4363L71.5961 23.7119H66.5057L76.113 6.02694H81.3707L90.954 23.7119ZM78.7418 10.5438L75.396 16.6857H82.0637L78.7418 10.5438ZM112.52 17.8568C112.504 20.0714 111.5 21.6885 109.508 22.7082C107.517 23.7278 104.92 24.2377 101.718 24.2377C98.1487 24.2377 95.3924 23.6004 93.4486 22.3258C91.5208 21.0512 90.5569 19.211 90.5569 16.8052H95.3127C95.3127 18.1754 95.9341 19.1791 97.1768 19.8164C98.4195 20.4537 99.9331 20.7644 101.718 20.7485C103.311 20.7644 104.673 20.5414 105.804 20.0793C106.935 19.6173 107.509 18.8764 107.525 17.8568C107.509 17.3788 107.382 17.0203 107.143 16.7813C106.919 16.5423 106.489 16.375 105.852 16.2794C105.231 16.1679 104.283 16.1122 103.008 16.1122H98.5868V12.9097H103.008C104.442 12.9097 105.517 12.7663 106.234 12.4796C106.967 12.1928 107.334 11.7307 107.334 11.0934C107.334 10.3924 106.784 9.87461 105.685 9.54003C104.601 9.18952 103.279 9.0063 101.718 8.99036C99.9331 8.97443 98.4195 9.16562 97.1768 9.56393C95.9341 9.94631 95.3127 10.5597 95.3127 11.4041H90.5569C90.5569 9.10986 91.712 7.55645 94.0222 6.74389C96.3483 5.91541 98.9134 5.50117 101.718 5.50117C103.422 5.50117 105.008 5.61269 106.473 5.83575C107.955 6.04287 109.254 6.53677 110.369 7.31746C111.484 8.09815 112.042 9.25325 112.042 10.7828C112.042 12.4238 111.205 13.5391 109.532 14.1286C111.412 14.734 112.408 15.9608 112.52 17.809V17.8568ZM125.677 12.1928C128.195 12.1928 130.162 12.4079 131.58 12.838C133.014 13.2682 134.01 13.8896 134.568 14.7021C135.141 15.5147 135.428 16.5423 135.428 17.7851V17.8568C135.428 19.5297 134.767 20.9317 133.444 22.0629C132.122 23.1782 129.78 23.7438 126.418 23.7597H114.78V6.05083H134.161V9.56393H119.488V12.1928H125.677ZM126.06 20.0793C127.589 20.0793 128.689 19.8961 129.358 19.5297C130.043 19.1632 130.385 18.5339 130.385 17.6417C130.385 17.0362 130.234 16.5822 129.931 16.2794C129.629 15.9767 129.175 15.7696 128.569 15.6581C127.964 15.5466 127.127 15.4908 126.06 15.4908H126.036H119.488V20.0554C121.83 20.0554 123.367 20.0634 124.1 20.0793C124.833 20.0793 125.295 20.0793 125.486 20.0793H126.06ZM156.28 6.02694L147.39 21.0353C146.832 22.0549 145.725 22.7799 144.068 23.21C142.427 23.6402 140.73 23.8234 138.977 23.7597V19.9837C140.013 19.9837 140.706 19.9041 141.057 19.7447C141.423 19.5854 141.606 19.3703 141.606 19.0995C141.606 18.972 141.59 18.8286 141.558 18.6693L134.317 6.02694H139.623L145.143 16.2077L150.998 6.02694H156.28ZM166.755 14.1286L177.127 23.7119H170.698L162.669 15.9927V23.7119H157.722V6.02694H162.669V12.4557L170.268 6.02694H176.769L166.755 14.1286ZM201.728 23.7119H196.637L194.797 20.3183H184.21L182.37 23.7119H177.28L186.887 6.02694H192.144L201.728 23.7119ZM189.516 10.5438L186.17 16.6857H192.838L189.516 10.5438ZM85.8636 41.4392C87.2019 41.7101 88.2136 42.1801 88.8987 42.8493C89.5838 43.5025 89.9264 44.4425 89.9264 45.6693V45.7649C89.9264 47.0714 89.5759 48.0831 88.8748 48.8C88.1738 49.517 87.2019 50.0189 85.9592 50.3056C84.7165 50.5765 83.1551 50.7199 81.2751 50.7358H81.2273H80.2713L67.9635 50.7119V33.0269H82.3744C84.2226 33.0429 85.6963 33.4252 86.7957 34.1741C87.895 34.9229 88.4447 35.9824 88.4447 37.3526V37.4482C88.4447 38.4838 88.2296 39.3282 87.7994 39.9814C87.3692 40.6347 86.724 41.1206 85.8636 41.4392ZM83.5932 38.1412C83.5932 37.5517 83.4578 37.1295 83.187 36.8746C82.9161 36.6038 82.5576 36.4365 82.1115 36.3727C81.6813 36.309 81.06 36.2771 80.2474 36.2771H80.2235H72.6716V40.0053L78.4072 40.0531H80.2474C81.1078 40.0531 81.7371 40.0292 82.1354 39.9814C82.5337 39.9336 82.8763 39.7743 83.1631 39.5035C83.4498 39.2326 83.5932 38.7785 83.5932 38.1412ZM81.0361 47.1988C82.008 47.1988 82.7329 47.167 83.2109 47.1032C83.6888 47.0236 84.0712 46.8324 84.358 46.5297C84.6448 46.2269 84.7882 45.741 84.7882 45.0718C84.7882 44.4186 84.6448 43.9486 84.358 43.6618C84.0712 43.3591 83.6888 43.1759 83.2109 43.1122C82.7329 43.0484 82.008 43.0166 81.0361 43.0166H81.0122H72.6716V47.151C76.1289 47.151 78.5905 47.167 80.0562 47.1988H81.0361ZM111.028 33.0269L102.137 48.0353C101.58 49.0549 100.472 49.7799 98.8153 50.21C97.1743 50.6402 95.4775 50.8234 93.7249 50.7597V46.9837C94.7605 46.9837 95.4536 46.9041 95.8041 46.7447C96.1706 46.5854 96.3538 46.3703 96.3538 46.0995C96.3538 45.972 96.3379 45.8286 96.306 45.6693L89.0647 33.0269H94.3702L99.8908 43.2077L105.746 33.0269H111.028ZM128.321 46.8881H130.687V53.0062H126.003V50.7358L112.214 50.7119V53.0062H107.53V46.8881H109.131C110.469 44.4505 111.449 42.1881 112.07 40.1009C112.692 37.9978 113.002 35.6399 113.002 33.0269H128.297L128.321 46.8881ZM117.4 36.7312C117.161 38.5157 116.754 40.2125 116.181 41.8216C115.623 43.4308 114.89 45.1196 113.982 46.8881H123.661V36.7551L117.4 36.7312Z" fill="#2C1F22"/>
            <defs>
              <clipPath id="clip0_38_76">
                <rect width="55.4736" height="55.4736" fill="white"/>
              </clipPath>
            </defs>
          </svg>



        </nuxt-link>




        <IconField class="hidden md:block " style="flex-grow: 1">
          <InputText class="" style="border-radius: 0; width: 100%" v-model="q" placeholder="Поиск по сайту" @keydown="keyDown"/>
          <InputIcon class="pi pi-search" />

        </IconField>
        <Button @click="visible=true" class="block md:!hidden"  icon="pi pi-bars"  />

        <div class="hidden md:flex gap-2 items-center">
          <a href="tel:+7 495 000 00 00" target="_blank" class="flex gap-2 items-center !px-6 !py-2 !text-black">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16.5001 12.6901V14.9401C16.5009 15.1489 16.4581 15.3557 16.3745 15.5471C16.2908 15.7385 16.168 15.9103 16.0141 16.0515C15.8602 16.1927 15.6785 16.3002 15.4806 16.3671C15.2828 16.434 15.0731 16.4589 14.8651 16.4401C12.5572 16.1893 10.3403 15.4007 8.39257 14.1376C6.58044 12.9861 5.04407 11.4497 3.89257 9.63757C2.62506 7.68098 1.83625 5.45332 1.59007 3.13507C1.57133 2.92767 1.59598 2.71864 1.66245 2.52129C1.72892 2.32394 1.83575 2.14259 1.97615 1.98879C2.11654 1.83499 2.28743 1.7121 2.47792 1.62796C2.6684 1.54382 2.87433 1.50027 3.08257 1.50007H5.33257C5.69655 1.49649 6.04942 1.62538 6.32539 1.86272C6.60137 2.10006 6.78163 2.42966 6.83257 2.79007C6.92754 3.51012 7.10366 4.21712 7.35757 4.89757C7.45848 5.16602 7.48032 5.45776 7.4205 5.73823C7.36069 6.01871 7.22172 6.27616 7.02007 6.48007L6.06757 7.43257C7.13524 9.31023 8.68991 10.8649 10.5676 11.9326L11.5201 10.9801C11.724 10.7784 11.9814 10.6395 12.2619 10.5796C12.5424 10.5198 12.8341 10.5417 13.1026 10.6426C13.783 10.8965 14.49 11.0726 15.2101 11.1676C15.5744 11.219 15.9071 11.4025 16.145 11.6832C16.3828 11.9639 16.5092 12.3223 16.5001 12.6901Z" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            +7 495 000 00 00
          </a>
          <Button severity="info" label="Обратный звонок"  />
        </div>

      </div>
      <div class="hidden md:flex items-center justify-between py-6">
        <nuxt-link class="hidden md:block" to="/catalog">
          <Button class="!px-6 !py-2"   label="Каталог" />
        </nuxt-link>
        <div class="flex gap-6 ">
          <nuxt-link class="font-medium" :to="link.url" v-for="link in links">{{link.label}}</nuxt-link>
        </div>

      </div>


    </header>
  </div>
  <Drawer v-model:visible="visible" position="right" header=" ">


    <div class="flex flex-col gap-4 ">
      <p>Москва</p>
      <a href="tel:+7 495 008 88-81">+7 495 008 88-81</a>
      <p> Круглосуточно 24/7</p>
      <nuxt-link to="/catalog">
        <Button fluid  icon="pi pi-bars" label="Каталог" />
      </nuxt-link>
      <nuxt-link :to="link.url" v-for="link in links">{{link.label}}</nuxt-link>

      <IconField  style="flex-grow: 1">
        <InputText style="border-radius: 0; width: 100%" v-model="q" placeholder="Поиск по сайту " @keydown="keyDown"/>
        <InputIcon class="pi pi-search" />
      </IconField>

    </div>

 </Drawer>
</template>

<style scoped>

</style>